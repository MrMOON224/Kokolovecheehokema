<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, My Love! üéâ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the cute theme */
        body {
            font-family: 'Roboto Slab', serif; /* A clean, modern font for all text */
            background-color: #FCE7F3; /* A soft, light pink background */
        }
        h1, h2 {
            font-family: 'Roboto Slab', serif; /* A clean, modern font for headings */
        }
        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem;
        }
        .cute-card {
            background-color: #FEF0F8; /* A slightly lighter pink */
            border-radius: 1.5rem; /* More rounded corners for a softer look */
            padding: 2.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
        }
        /* Bounce animation for the button */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        .cute-button {
            background-color: #FFB3D9; /* A vibrant pink for the button */
            color: #6A1A51; /* Darker pink text */
            font-weight: 700;
            padding: 0.75rem 2rem;
            border-radius: 9999px; /* Pill-shaped button */
            transition: box-shadow 0.3s ease; /* Only transition the shadow for hover */
            animation: bounce 2s infinite; /* Apply the bouncing animation */
        }
        .cute-button:hover {
            box-shadow: 0 5px 15px rgba(255, 179, 217, 0.4);
        }
        .input-field {
            background-color: #FFEBEE;
            border-color: #F8BBD0;
            color: #6A1A51;
            border-width: 2px;
            padding: 0.75rem;
            border-radius: 0.75rem;
        }
        .message-box {
            min-height: 2rem;
        }
        .photo-frame {
            border: 4px solid #F8BBD0;
            border-radius: 100%; /* Circular frame */
            padding: 0.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        /* Sprinkle Animation CSS */
        @keyframes sparkle {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }
        .sprinkle {
            position: fixed;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000; /* Ensure sprinkles are on top */
            animation: sparkle 2s ease-in-out forwards;
        }
        /* New styles for the canvas puzzle */
        #puzzle-canvas {
            background-color: #FFEBEE;
            border: 2px solid #F8BBD0;
            border-radius: 0.75rem;
            cursor: pointer;
            touch-action: none; /* Prevents default touch actions like scrolling */
        }
        /* New Quiz styles for a cuter look */
        .quiz-option {
            background-color: #fff;
            border: 2px solid #FFB3D9; /* Cute pink border */
            padding: 1.25rem;
            border-radius: 1rem; /* More rounded corners */
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08); /* Soft shadow */
            position: relative;
            overflow: hidden;
            text-align: left; /* Align text left */
        }
        .quiz-option:hover {
            transform: translateY(-5px); /* Lift effect */
            box-shadow: 0 6px 12px rgba(0,0,0,0.12); /* Stronger shadow on hover */
        }
        .quiz-option.correct {
            background-color: #E8FFEF; /* Light green for correct */
            border-color: #4CAF50; /* Green border */
        }
        .quiz-option.incorrect {
            background-color: #FFE8E8; /* Light red for incorrect */
            border-color: #F44336; /* Red border */
        }
        .quiz-option .option-label {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background-color: #FFB3D9; /* Cute pink label background */
            color: #6A1A51;
            font-weight: bold;
            margin-right: 1rem;
        }
    </style>
</head>
<body>
    <!-- Main container for the website content -->
    <div id="page-container" class="container">
        
        <!-- Page 1: Birthday Message and Button -->
        <div id="page1" class="cute-card">
            <!-- Updated Photo Frame to be circular -->
            <div class="photo-frame mb-8 mx-auto w-full max-w-xs aspect-square overflow-hidden">
                <!-- Replace this URL with your actual picture! -->
                <img src="p.jpg" alt="A photo of us" class="w-full h-full object-cover">
            </div>

            <h1 class="text-4xl md:text-5xl font-extrabold text-[#6A1A51] mb-4">Happy 16th Birthday! üéâ</h1>
            
            <!-- Place for a paragraph, now with a bolder font -->
            <p class="text-lg text-[#9F7AEA] font-bold mb-8">
                ·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Ä°·ÄÅ·Äª·ÄÖ·Ä∫·ÄÜ·ÄØ·Ä∂·Ä∏·Ä°·Äû·Ää·Ä∫·Ä∏·Äê·ÄØ·Ä∂·Ä∏·Äú·Ä±·Ä∏·Äê·Ä±·Ä¨·ÄÑ·Ä∫ ·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Äî·Ä≤·Ä∑·ÄÖ·Äê·ÄΩ·Ä≤·Ä∏·Äê·ÄØ·Äî·Ä∫·Ä∏·ÄÄ ·ÅÅ·ÅÑ·Äî·Äæ·ÄÖ·Ä∫·ÄÄ·Äú·Ä±·Ä∏·Äú·Ä±·Ä∏·ÄÄ·Äî·Ä±·Ä°·ÄÅ·ÄØ·ÄÜ·Ä≠·ÄØ ·ÅÅ·ÅÜ·Äî·Äæ·ÄÖ·Ä∫·Äú·Ä∞·ÄÄ·Äº·ÄÆ·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏·Äñ·Äº·ÄÖ·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äô·Äö·Ä∫ ·Äû·Ä≤·Äû·Ä≤·ÄÄ·Ä≠·ÄØ·Ää·Ä≠·Äô·Äú·Ä±·Ä∏·Äú·Ä∫·Ä≠·ÄØ·ÄÄ·Ä±·Ä¨·Ä∏ ·ÄÅ·Äª·ÄÖ·Ä∫·Äû·Ä∞·Äú·Ä≠·ÄØ·ÄÄ·Ä±·Ä¨·Ä∏·Ä°·Äô·Äª·Ä¨·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏·ÄÅ·Äª·ÄÖ·Ä∫·Äê·Äö·Ä∫ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äô·ÄΩ·Ä±·Ä∏·Äî·Ä±·Ä∑·Äê·Ä±·Äú·Ä≤·Ä°·Äê·Ä∞·Äê·Ä∞·Äï·Ä≤·Äî·Ä±·Äû·ÄΩ·Ä¨·Ä∏·ÄÅ·Äª·ÄÑ·Ä∫·Äê·Äö·Ä∫ ·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Ä°·Äû·Ää·Ä∫·Ä∏·Äê·ÄØ·Ä∂·Ä∏·Äú·Ä±·Ä∏ ·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Äõ·Äæ·Ä±·Ä∑·Äô·Ä¨·Äê·ÄÑ·Ä∫·ÄÄ·Äú·Ä±·Ä∏·Äú·Ä±·Ä∏·ÄÄ·Äî·Ä±·Äú·Ä∞·ÄÄ·Äº·ÄÆ·Ä∏·Äú·Ä±·Ä∏·Äñ·Äº·ÄÖ·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äô·Äö·Ä∫
            </p>

            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button id="gift-button" class="cute-button text-lg">
                    Start the Puzzle
                </button>
                <button id="quiz-button" class="cute-button text-lg bg-green-300 text-green-800 hidden">
                    Take the Quiz
                </button>
            </div>
        </div>

        <!-- Page 2: Visual Puzzle Input (initially hidden) -->
        <div id="page2" class="cute-card hidden">
            <h2 class="text-3xl font-bold text-[#6A1A51] mb-4">The Path </h2>
            <p class="text-lg text-[#9F7AEA] mb-6">
                Connect the dots in order to find the secret path! hint:·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Äê·Ä≠·ÄØ·Ä∑ anni ·Äõ·ÄÄ·Ä∫.
            </p>
            
            <!-- The visual puzzle canvas -->
            <canvas id="puzzle-canvas" width="300" height="300" class="mb-4 mx-auto"></canvas>
            
            <div id="message-box" class="message-box text-red-500 font-medium text-sm mt-2"></div>
            <div class="flex justify-between mt-6">
                <button id="back-button-puzzle" class="cute-button text-lg w-1/2 mr-2 bg-gray-400 hover:bg-gray-500">Back</button>
                <button id="clear-button" class="cute-button text-lg w-1/2 ml-2">Clear Path</button>
            </div>
            <!-- New Unlock button, hidden until puzzle is solved -->
            <button id="unlock-button-puzzle" class="cute-button text-lg mt-6 w-full hidden">
                Unlock Quiz
            </button>
        </div>

        <!-- Page 2 - New: Quiz Game -->
        <div id="page2-quiz" class="cute-card hidden">
            <h2 class="text-3xl font-bold text-[#6A1A51] mb-4">The Love Quiz</h2>
            <p class="text-lg text-[#9F7AEA] mb-6">
                Answer these questions about us to unlock your gift!
            </p>
            <div id="quiz-content" class="text-left">
                <h3 id="quiz-question" class="text-2xl font-bold text-[#6A1A51] mb-4"></h3>
                <div id="quiz-options" class="flex flex-col gap-4">
                    <!-- Quiz options will be dynamically added here -->
                </div>
                <div id="quiz-feedback" class="message-box font-medium text-sm mt-4 text-center"></div>
            </div>
            <button id="quiz-next-button" class="cute-button text-lg mt-6 w-full hidden">
                Next Question
            </button>
            <div class="flex justify-between mt-6">
                <button id="back-button-quiz" class="cute-button text-lg w-1/2 mr-2 bg-gray-400 hover:bg-gray-500">Back</button>
            </div>
        </div>

        <!-- Page 3: Gift Message (initially hidden) -->
        <div id="page3" class="cute-card hidden">
            <h2 class="text-4xl md:text-5xl font-extrabold text-[#6A1A51] mb-4">You got it!</h2>
            <br><br>
            <p class="text-lg text-[#9F7AEA] mb-6">
                ID: 10.2.2024
            </p>
            <p class="text-lg text-[#9F7AEA] mb-6">
                Pass: 16.02.2024
            </p>
            <p class="text-lg text-[#9F7AEA] mb-6">
                wave pay
            </p>
            <h2 class="text-4xl md:text-5xl font-extrabold text-[#6A1A51] mb-4">Enjoy!</h2>
            <!-- Added a back button on the final page -->
            <button id="back-button-final" class="cute-button text-lg mt-6">Back to Start</button>
        </div>
    </div>

    <script>
        // Get references to the HTML elements
        const page1 = document.getElementById('page1');
        const page2Puzzle = document.getElementById('page2');
        const page2Quiz = document.getElementById('page2-quiz');
        const page3 = document.getElementById('page3');
        const giftButton = document.getElementById('gift-button');
        const backButtonPuzzle = document.getElementById('back-button-puzzle');
        const backButtonQuiz = document.getElementById('back-button-quiz');
        const clearButton = document.getElementById('clear-button');
        const unlockButtonPuzzle = document.getElementById('unlock-button-puzzle');
        const messageBox = document.getElementById('message-box');
        const backButtonFinal = document.getElementById('back-button-final');

        // New elements for the canvas puzzle
        const canvas = document.getElementById('puzzle-canvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let drawnPath = []; // Stores the sequence of points drawn by the user

        // The sequence of numbers to form the secret path (1 then 0)
        const SECRET_SEQUENCE = [1, 0];

        // Puzzle element positions and data
        const puzzlePoints = [
            { x: 50, y: 150, radius: 25, label: '1', number: 1 },
            { x: 150, y: 50, radius: 25, label: '9', number: 9 },
            { x: 250, y: 150, radius: 25, label: '0', number: 0 },
            { x: 150, y: 250, radius: 25, label: '3', number: 3 },
            { x: 100, y: 100, radius: 25, label: '7', number: 7 },
            { x: 200, y: 200, radius: 25, label: '4', number: 4 }
        ];
        
        // Function to draw the puzzle elements
        function drawPuzzle() {
            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the points
            puzzlePoints.forEach(point => {
                ctx.beginPath();
                ctx.arc(point.x, point.y, point.radius, 0, 2 * Math.PI);
                ctx.fillStyle = '#FFD1E5';
                ctx.fill();
                ctx.strokeStyle = '#F8BBD0';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.closePath();
                
                // Draw the label
                ctx.fillStyle = '#6A1A51';
                ctx.font = '24px "Roboto Slab"';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(point.label, point.x, point.y);
            });
        }

        // Handle drawing on the canvas
        function getMousePos(event) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            const clientX = event.clientX || event.touches[0].clientX;
            const clientY = event.clientY || event.touches[0].clientY;
            return {
                x: (clientX - rect.left) * scaleX,
                y: (clientY - rect.top) * scaleY
            };
        }

        function handleStart(event) {
            const pos = getMousePos(event);
            const clickedPoint = puzzlePoints.find(point => {
                const dist = Math.sqrt((pos.x - point.x)**2 + (pos.y - point.y)**2);
                return dist < point.radius;
            });

            // Check if the first point clicked is the start of the secret path
            if (clickedPoint && clickedPoint.number === SECRET_SEQUENCE[0]) {
                isDrawing = true;
                drawnPath = [clickedPoint.number];
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
                messageBox.textContent = ""; // Clear message on start
                unlockButtonPuzzle.classList.add('hidden'); // Hide the unlock button
            }
        }

        function handleMove(event) {
            if (!isDrawing) return;
            event.preventDefault(); // Prevents scrolling on touch devices
            const pos = getMousePos(event);
            ctx.lineTo(pos.x, pos.y);
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#C084FC';
            ctx.stroke();

            // Check if the line passes through the next point in the sequence
            const lastNumber = drawnPath[drawnPath.length - 1];
            const nextExpectedNumber = SECRET_SEQUENCE[drawnPath.length];
            
            if (nextExpectedNumber !== undefined) {
                const nextPoint = puzzlePoints.find(p => p.number === nextExpectedNumber);
                const dist = Math.sqrt((pos.x - nextPoint.x)**2 + (pos.y - nextPoint.y)**2);
                
                if (dist < nextPoint.radius && drawnPath.length < SECRET_SEQUENCE.length) {
                    drawnPath.push(nextPoint.number);
                    // Draw a straight line to the next point to make it neat
                    ctx.lineTo(nextPoint.x, nextPoint.y);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(nextPoint.x, nextPoint.y);
                }
            }
        }

        function handleEnd(event) {
            if (!isDrawing) return;
            isDrawing = false;
            
            // Final check of the path
            if (drawnPath.length === SECRET_SEQUENCE.length) {
                if (JSON.stringify(drawnPath) === JSON.stringify(SECRET_SEQUENCE)) {
                    messageBox.textContent = "You did it! Click the button below to unlock the quiz.";
                    unlockButtonPuzzle.classList.remove('hidden'); // Show the unlock button
                } else {
                    messageBox.textContent = "Oops! That's not the correct path. Try again!";
                    // Optional: Clear the canvas if the path is wrong
                    clearPuzzle();
                }
            } else {
                messageBox.textContent = "You didn't complete the path! Try again!";
                clearPuzzle();
            }
        }
        
        // Function to clear the puzzle and reset state
        function clearPuzzle() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the drawing
            drawPuzzle(); // Redraw the original puzzle
            drawnPath = [];
            unlockButtonPuzzle.classList.add('hidden'); // Hide the button
            messageBox.textContent = ""; // Clear any messages
        }

        // Event listeners for drawing
        canvas.addEventListener('mousedown', handleStart);
        canvas.addEventListener('mousemove', handleMove);
        canvas.addEventListener('mouseup', handleEnd);
        canvas.addEventListener('mouseleave', handleEnd);

        // Touch event listeners for mobile devices
        canvas.addEventListener('touchstart', handleStart);
        canvas.addEventListener('touchmove', handleMove);
        canvas.addEventListener('touchend', handleEnd);

        // Event listener for the main gift button
        giftButton.addEventListener('click', () => {
            page1.classList.add('hidden');
            page2Puzzle.classList.remove('hidden');
            drawPuzzle(); // Draw the puzzle when the page is shown
        });

        // Event listener for the back button
        backButtonPuzzle.addEventListener('click', () => {
            page2Puzzle.classList.add('hidden');
            page1.classList.remove('hidden');
            clearPuzzle(); // Reset puzzle on back navigation
        });

        // Event listener for the back button on quiz page
        backButtonQuiz.addEventListener('click', () => {
            page2Quiz.classList.add('hidden');
            page2Puzzle.classList.remove('hidden'); // Go back to the puzzle page
        });

        // Event listener for the clear path button
        clearButton.addEventListener('click', clearPuzzle);

        // Event listener for the new unlock button
        unlockButtonPuzzle.addEventListener('click', () => {
            page2Puzzle.classList.add('hidden');
            page2Quiz.classList.remove('hidden');
            startQuiz(); // Start the quiz when the page is shown
        });

        // Event listener for the new back button on the final page
        backButtonFinal.addEventListener('click', () => {
            page3.classList.add('hidden');
            page1.classList.remove('hidden');
            clearPuzzle(); // Reset puzzle state for the next time
        });

        // Sprinkles animation logic
        const sprinkleColors = ['#FFB3D9', '#E6A8E0', '#FFD1E5', '#C084FC', '#F8BBD0'];
        const numSprinkles = 50;

        function createSprinkle() {
            const sprinkle = document.createElement('div');
            sprinkle.classList.add('sprinkle');
            const size = Math.random() * 5 + 3; // Random size between 3px and 8px
            sprinkle.style.width = `${size}px`;
            sprinkle.style.height = `${size}px`;
            sprinkle.style.left = `${Math.random() * 100}vw`; // Random horizontal position
            sprinkle.style.top = `${Math.random() * 100}vh`; // Random vertical position
            sprinkle.style.backgroundColor = sprinkleColors[Math.floor(Math.random() * sprinkleColors.length)];
            sprinkle.style.animationDelay = `${Math.random() * 2}s`; // Stagger the animation start
            document.body.appendChild(sprinkle);

            // Remove the sprinkle after the animation to prevent memory issues
            sprinkle.addEventListener('animationend', () => {
                sprinkle.remove();
            });
        }

        // Create sprinkles on page load
        for (let i = 0; i < numSprinkles; i++) {
            createSprinkle();
        }

        // --- New Quiz Game Logic ---
        const quizQuestions = [
            {
                question: "·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Äê·Ä≠·ÄØ·Äï·Äë·Äô·ÄÜ·ÄØ·Ä∂·Ä∏·Äò·Äö·Ä∫·Äô·Ä¨·Äê·ÄΩ·Ä±·Ä∑·Äê·Ä¨·Äú·Ä≤",
                options: ["·Äû·Ä≤·Äû·Ä≤·Äê·Ä≠·ÄØ·Ä°·Ä≠·Äô·Ä∫·Äî·Ä¨·Ä∏·ÄÄ·Äï·Äî·Ä∫·Ä∏·ÄÅ·Äª·Ä≤·Ä∂", "·ÄÄ·Ä±·Ä¨·Ä∫·Äñ·Ä≠·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫", "·Äô·ÄØ·Äî·Ä∫·Ä∑·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫", "·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Ä°·Ä≠·Äô·Ä∫"],
                answer: "·Äû·Ä≤·Äû·Ä≤·Äê·Ä≠·ÄØ·Ä°·Ä≠·Äô·Ä∫·Äî·Ä¨·Ä∏·ÄÄ·Äï·Äî·Ä∫·Ä∏·ÄÅ·Äª·Ä≤·Ä∂"
            },
            {
                question: "·Äû·Ä≤·Äû·Ä≤·ÄÄ·Äò·Ä¨·Äù·Äê·Ä∫·Äë·Ä¨·Ä∏·Äê·Ä¨·Äú·Ä≤·Ä°·Ä≤·Äê·ÄØ·Äî·Ä∫·Ä∏·ÄÄ",
                options: ["·Äñ·ÄÑ·Ä∫·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫", "shirt ·Äî·Ä≤·Ä∑·ÄÇ·Äª·ÄÑ·Ä∫·Ä∏·Äò·Ä±·Ä¨·ÄÑ·Ä∫·Äò·ÄÆ·Äõ·Äæ·Ää·Ä∫", "·ÄÇ·Ä´·Äù·Äî·Ä∫", "·Ä°·Äî·ÄΩ·Ä±·Ä∏·Äë·Ää·Ä∫"],
                answer: "shirt ·Äî·Ä≤·Ä∑·ÄÇ·Äª·ÄÑ·Ä∫·Ä∏·Äò·Ä±·Ä¨·ÄÑ·Ä∫·Äò·ÄÆ·Äõ·Äæ·Ää·Ä∫"
            },
            {
                question: "·ÄÄ·Ä≠·ÄØ·ÄÄ·Ä≠·ÄØ·Äê·Ä≠·ÄØ·Äï·Äë·Äô·ÄÜ·ÄØ·Ä∂·Ä∏·Äî·Äô·Ä∫·Ä∏·Äê·Ä¨·Äò·Äö·Ä∫·Äî·Ä¨·Ä∏·Äú·Ä≤",
                options: ["·ÄÄ·Äª·ÄØ·Ä∂·Ä∏·Äò·Ä±·Ä∏·Äô·Ä¨", "·Äô·ÄØ·Äî·Ä∫·Ä∑·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Äô·Ä¨", "·Äú·ÄÄ·Ä∫·Äñ·ÄÄ·Ä∫·Äõ·Ää·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫", "·Äï·Äî·Ä∫·Ä∏·ÄÅ·Äº·Ä∂"],
                answer: "·ÄÄ·Äª·ÄØ·Ä∂·Ä∏·Äò·Ä±·Ä∏·Äô·Ä¨"
            }
        ];

        let currentQuestionIndex = 0;
        let correctAnswersCount = 0;
        const requiredCorrectAnswers = 3; // Number of correct answers to unlock the gift

        const quizQuestionElement = document.getElementById('quiz-question');
        const quizOptionsElement = document.getElementById('quiz-options');
        const quizFeedbackElement = document.getElementById('quiz-feedback');
        const quizNextButton = document.getElementById('quiz-next-button');

        function startQuiz() {
            currentQuestionIndex = 0;
            correctAnswersCount = 0;
            quizNextButton.classList.add('hidden');
            quizFeedbackElement.textContent = '';
            showQuestion();
        }

        function showQuestion() {
            const questionData = quizQuestions[currentQuestionIndex];
            quizQuestionElement.textContent = questionData.question;
            quizOptionsElement.innerHTML = '';
            quizFeedbackElement.textContent = '';
            quizNextButton.classList.add('hidden');

            // Map option labels to letters
            const optionLabels = ['A', 'B', 'C', 'D'];

            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('quiz-option', 'w-full'); // w-full class to make it responsive
                // Use a data attribute to store the answer for easier checking
                button.dataset.option = option;
                button.innerHTML = `
                    <span class="option-label">${optionLabels[index]}</span>
                    <span>${option}</span>
                `;
                button.addEventListener('click', () => checkAnswer(button, option, questionData.answer));
                quizOptionsElement.appendChild(button);
            });
        }

        function checkAnswer(button, selectedAnswer, correctAnswer) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.disabled = true; // Disable all buttons after one is clicked
                // Check if the option's data attribute matches the correct answer
                if (opt.dataset.option === correctAnswer) { 
                    opt.classList.add('correct');
                } else {
                    opt.classList.add('incorrect');
                }
            });

            if (selectedAnswer === correctAnswer) {
                quizFeedbackElement.textContent = "That's right! You're the best.";
                quizFeedbackElement.classList.remove('text-red-500');
                quizFeedbackElement.classList.add('text-green-500');
                correctAnswersCount++;
            } else {
                quizFeedbackElement.textContent = "Oops, that's not it. The correct answer is highlighted.";
                quizFeedbackElement.classList.remove('text-green-500');
                quizFeedbackElement.classList.add('text-red-500');
            }

            // Show next button after a short delay
            setTimeout(() => {
                 quizNextButton.classList.remove('hidden');
            }, 1000);
        }

        quizNextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length) {
                showQuestion();
            } else {
                // All questions answered, check if enough were correct
                if (correctAnswersCount >= requiredCorrectAnswers) {
                    quizFeedbackElement.textContent = `You got ${correctAnswersCount} out of ${quizQuestions.length} correct! You've unlocked your gift!`;
                    quizFeedbackElement.classList.remove('text-red-500');
                    quizFeedbackElement.classList.add('text-green-500');
                    // Delay for dramatic effect before showing the gift
                    setTimeout(() => {
                        page2Quiz.classList.add('hidden');
                        page3.classList.remove('hidden');
                    }, 2000);
                } else {
                    quizFeedbackElement.textContent = `You got ${correctAnswersCount} out of ${quizQuestions.length} correct. Not quite enough. Try again!`;
                    quizFeedbackElement.classList.remove('text-green-500');
                    quizFeedbackElement.classList.add('text-red-500');
                    setTimeout(() => {
                        startQuiz(); // Restart the quiz
                    }, 2000);
                }
            }
        });
    </script>
</body>
</html>
